FROM mcr.microsoft.com/dotnet/aspnet:6.0

ARG ANALYSISSERVICE_SERVICEURI
ARG BUSCONFIGURATION_SERVICEURI
ARG GRAFANA_LOKI_URI
ARG JAEGER_HOST
ARG JAEGER_PORT

COPY app /app/

WORKDIR /app

ENV ANALYSISSERVICE__SERVICEURI "${ANALYSISSERVICE_SERVICEURI}"
ENV BUSCONFIGURATION__SERVICEURI "${BUSCONFIGURATION_SERVICEURI}"
ENV GRAFANA_LOKI_URI "${GRAFANA_LOKI_URI}"
ENV JAEGER__HOST "${JAEGER_HOST}"
ENV JAEGER__PORT "${JAEGER_PORT}"

ENTRYPOINT [ "dotnet", "Climatisation.Rules.dll" ]
